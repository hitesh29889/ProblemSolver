"use strict";(self.webpackChunkGembaCI=self.webpackChunkGembaCI||[]).push([[960],{1960:(di,ce,d)=>{d.r(ce),d.d(ce,{ConnectionStringsComponent:()=>U,DEFAULT_EDITIONS_ENTITY_ACTIONS:()=>Ze,DEFAULT_EDITIONS_ENTITY_PROPS:()=>Re,DEFAULT_EDITIONS_FORM_PROPS:()=>ne,DEFAULT_EDITIONS_TOOLBAR_ACTIONS:()=>Ue,DEFAULT_SAAS_CREATE_FORM_PROPS:()=>Be,DEFAULT_SAAS_EDIT_FORM_PROPS:()=>$e,DEFAULT_SAAS_ENTITY_ACTIONS:()=>ze,DEFAULT_SAAS_ENTITY_PROPS:()=>je,DEFAULT_SAAS_TOOLBAR_ACTIONS:()=>Qe,DEFAULT_TENANTS_CREATE_FORM_PROPS:()=>V,DEFAULT_TENANTS_EDIT_FORM_PROPS:()=>Je,DEFAULT_TENANTS_ENTITY_ACTIONS:()=>Ve,DEFAULT_TENANTS_ENTITY_PROPS:()=>qe,DEFAULT_TENANTS_TOOLBAR_ACTIONS:()=>Ye,EditionDeleteComponent:()=>Oe,EditionDeleteValidator:()=>Fe,EditionsComponent:()=>y,EditionsUsageWidgetComponent:()=>we,ImpersonateTenantModalComponent:()=>te,ImpersonateTenantModalService:()=>ee,LatestTenantsWidgetComponent:()=>Pe,MoveAllTenantsComponent:()=>Le,SAAS_CREATE_FORM_PROP_CONTRIBUTORS:()=>se,SAAS_EDIT_FORM_PROP_CONTRIBUTORS:()=>re,SAAS_ENTITY_ACTION_CONTRIBUTORS:()=>ie,SAAS_ENTITY_PROP_CONTRIBUTORS:()=>ae,SAAS_TOOLBAR_ACTION_CONTRIBUTORS:()=>oe,SaasExtensionsGuard:()=>le,SaasModule:()=>ci,SetTenantPasswordModalComponent:()=>X,TenantsComponent:()=>v,defaultDateFormatRegex:()=>pi});var pe=d(5861),e=d(2223),g=d(4755),m=d(6104),c=d(6304);let I=(()=>{class n{constructor(t){this.restService=t,this.apiName="SaasHost",this.create=(i,o)=>this.restService.request({method:"POST",url:"/api/saas/editions",body:i},{apiName:this.apiName,...o}),this.delete=(i,o)=>this.restService.request({method:"DELETE",url:`/api/saas/editions/${i}`},{apiName:this.apiName,...o}),this.get=(i,o)=>this.restService.request({method:"GET",url:`/api/saas/editions/${i}`},{apiName:this.apiName,...o}),this.getAllList=i=>this.restService.request({method:"GET",url:"/api/saas/editions/all"},{apiName:this.apiName,...i}),this.getList=(i,o)=>this.restService.request({method:"GET",url:"/api/saas/editions",params:{filter:i.filter,sorting:i.sorting,skipCount:i.skipCount,maxResultCount:i.maxResultCount}},{apiName:this.apiName,...o}),this.getPlanLookup=i=>this.restService.request({method:"GET",url:"/api/saas/editions/plan-lookup"},{apiName:this.apiName,...i}),this.getUsageStatistics=i=>this.restService.request({method:"GET",url:"/api/saas/editions/statistics/usage-statistic"},{apiName:this.apiName,...i}),this.moveAllTenants=(i,o,s)=>this.restService.request({method:"PUT",url:`/api/saas/editions/${i}/move-all-tenants`,params:{editionId:o}},{apiName:this.apiName,...s}),this.update=(i,o,s)=>this.restService.request({method:"PUT",url:`/api/saas/editions/${i}`,body:o},{apiName:this.apiName,...s})}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(c.vgb))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E=(()=>{class n{constructor(t){this.restService=t,this.apiName="SaasHost",this.applyDatabaseMigrations=(i,o)=>this.restService.request({method:"POST",url:`/api/saas/tenants/${i}/apply-database-migrations`},{apiName:this.apiName,...o}),this.checkConnectionString=(i,o)=>this.restService.request({method:"GET",url:"/api/saas/tenants/check-connection-string",params:{connectionString:i}},{apiName:this.apiName,...o}),this.create=(i,o)=>this.restService.request({method:"POST",url:"/api/saas/tenants",body:i},{apiName:this.apiName,...o}),this.delete=(i,o)=>this.restService.request({method:"DELETE",url:`/api/saas/tenants/${i}`},{apiName:this.apiName,...o}),this.get=(i,o)=>this.restService.request({method:"GET",url:`/api/saas/tenants/${i}`},{apiName:this.apiName,...o}),this.getConnectionStrings=(i,o)=>this.restService.request({method:"GET",url:`/api/saas/tenants/${i}/connection-strings`},{apiName:this.apiName,...o}),this.getDatabases=i=>this.restService.request({method:"GET",url:"/api/saas/tenants/databases"},{apiName:this.apiName,...i}),this.getEditionLookup=i=>this.restService.request({method:"GET",url:"/api/saas/tenants/lookup/editions"},{apiName:this.apiName,...i}),this.getList=(i,o)=>this.restService.request({method:"GET",url:"/api/saas/tenants",params:{filter:i.filter,getEditionNames:i.getEditionNames,editionId:i.editionId,expirationDateMin:i.expirationDateMin,expirationDateMax:i.expirationDateMax,activationState:i.activationState,sorting:i.sorting,skipCount:i.skipCount,maxResultCount:i.maxResultCount}},{apiName:this.apiName,...o}),this.setPassword=(i,o,s)=>this.restService.request({method:"PUT",url:`/api/saas/tenants/${i}/set-password`,body:o},{apiName:this.apiName,...s}),this.update=(i,o,s)=>this.restService.request({method:"PUT",url:`/api/saas/tenants/${i}`,body:o},{apiName:this.apiName,...s}),this.updateConnectionStrings=(i,o,s)=>this.restService.request({method:"PUT",url:`/api/saas/tenants/${i}/connection-strings`,body:o},{apiName:this.apiName,...s})}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(c.vgb))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var b=(()=>((b=b||{})[b.Waiting=0]="Waiting",b[b.Completed=1]="Completed",b[b.Failed=2]="Failed",b[b.Refunded=3]="Refunded",b))();(0,c.Uoq)(b);var S=(()=>((S=S||{})[S.OneTime=0]="OneTime",S[S.Subscription=1]="Subscription",S))();(0,c.Uoq)(S);var _=(()=>((_=_||{})[_.Active=0]="Active",_[_.ActiveWithLimitedTime=1]="ActiveWithLimitedTime",_[_.Passive=2]="Passive",_))();const Xe=(0,c.Uoq)(_);var M=d(8746),q=d(3905),J=d(1135),k=d(9646),l=d(5030),f=d(4115),p=d(9338),N=d(8505),Y=d(4004),et=d(9718),F=d(2857),u=d(5434);function tt(n,a){if(1&n&&(e.TgZ(0,"option",1),e._uU(1),e.qZA()),2&n){const t=a.$implicit,i=e.oxw();e.Q6J("ngValue",t[i.lookupIdProp]),e.xp6(1),e.hij(" ",t[i.lookupNameProp]," ")}}const ue=["*"];function it(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5)(2,"abp-advanced-entity-filters-toggle",6),e.NdJ("expandedChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.filtersHidden=o)}),e.qZA()(),e.TgZ(3,"div",7),e.Hsn(4,1),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("localizationSourceName",t.localizationSourceName)("expanded",t.filtersHidden),e.xp6(1),e.Q6J("ngbCollapse",t.filtersHidden)}}const ot=[[["abp-advanced-entity-filters-above-search"]],[["abp-advanced-entity-filters-form"]]],at=["abp-advanced-entity-filters-above-search","abp-advanced-entity-filters-form"];function rt(n,a){if(1&n&&(e.TgZ(0,"label",9),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.labelText)}}function lt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cleanValue())}),e._UZ(1,"i",11),e.qZA()}}function ct(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(6);return e.KtG(o.toggle())}),e._UZ(1,"i",12),e.qZA()}}function pt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"span",13),e.NdJ("mouseenter",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.hoveredDate=s)})("mouseleave",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hoveredDate=null)}),e._uU(1),e.qZA()}if(2&n){const t=a.$implicit,i=a.focused,o=e.oxw();e.ekj("focused",i)("range",o.isRange(t))("faded",o.isHovered(t)||o.isInside(t)),e.xp6(1),e.hij(" ",t.day," ")}}function dt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"abp-button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.cleanValue())}),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"AbpUi::Clear")," "))}function ut(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"abp-button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.setToday())}),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.YNc(4,dt,3,3,"abp-button",16),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"AbpUi::Today")," "),e.xp6(2),e.Q6J("ngIf",t.dates)}}let mt=(()=>{class n{constructor(){this.placeholder=""}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-entity-filter"]],inputs:{list:"list",placeholder:"placeholder"},decls:5,vars:4,consts:[[1,"input-group"],["type","search",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fas","fa-search"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("ngModelChange",function(r){return o.list.filter=r}),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.list.get()}),e._UZ(4,"i",3),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("placeholder",e.lcZ(2,2,o.placeholder||"AbpUi::PagerSearch"))("ngModel",o.list.filter))},dependencies:[l.Fj,l.JJ,l.On,c.fuE],encapsulation:2})}return n})(),z=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[g.ez,c.IR2,l.u5]})}return n})(),gt=(()=>{class n extends c.ksn{constructor(){super(...arguments),this.lookupNameProp="displayName",this.lookupIdProp="id",this.maxResultCount=10,this.skipCount=0,this.disabled=!1}get pageQuery(){return this.createRequestDto(this)}set pageQuery(t){Object.assign(this,this.createRequestDto(t))}createRequestDto(t){return new c.rQ2({maxResultCount:t.maxResultCount,skipCount:t.skipCount,sorting:t.sorting})}static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=e.n5z(n)))(o||n)}}();static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{getFn:"getFn",lookupNameProp:"lookupNameProp",lookupIdProp:"lookupIdProp",maxResultCount:"maxResultCount",skipCount:"skipCount",sorting:"sorting",disabled:"disabled",cid:"cid"},features:[e.qOj],decls:0,vars:0,template:function(i,o){},encapsulation:2})}return n})(),_t=(()=>{class n extends gt{get isInvalid(){return this.ngControl.dirty&&this.ngControl.invalid}constructor(t){super(t),this.maxResultCount=1e3,this.emptyOption={label:"AbpIdentity::Dash",value:void 0},this.datas=[],this.ngControl=t.get(l.a5),this.ngControl.valueAccessor=this}ngOnInit(){this.get()}get(){this.getFn(this.pageQuery).subscribe(({items:t})=>{this.datas=t})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-lookup-select"]],inputs:{maxResultCount:"maxResultCount",emptyOption:"emptyOption"},features:[e.qOj],decls:5,vars:10,consts:[[1,"form-select","form-control",3,"id","ngModel","abpDisabled","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"]],template:function(i,o){1&i&&(e.TgZ(0,"select",0),e.NdJ("ngModelChange",function(r){return o.value=r}),e.TgZ(1,"option",1),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.YNc(4,tt,2,2,"option",2),e.qZA()),2&i&&(e.ekj("input-validation-error",o.isInvalid),e.Q6J("id",o.cid)("ngModel",o.value)("abpDisabled",o.disabled),e.xp6(1),e.Q6J("ngValue",o.emptyOption.value),e.xp6(1),e.Oqu(e.lcZ(3,8,o.emptyOption.label)),e.xp6(2),e.Q6J("ngForOf",o.datas))},dependencies:[g.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,p.x3,c.fuE],encapsulation:2})}return n})(),me=(()=>{class n{constructor(){this.localizationSourceName="",this.expandedChange=new e.vpe,this.aId=""}toggle(){this.expanded=!this.expanded,this.expandedChange.emit(this.expanded)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-advanced-entity-filters-toggle"]],inputs:{localizationSourceName:"localizationSourceName",expanded:"expanded",aId:"aId"},outputs:{expandedChange:"expandedChange"},decls:4,vars:9,consts:[["href","javascript:;",3,"click"],["aria-hidden","true",1,"fa","ms-1"]],template:function(i,o){1&i&&(e.TgZ(0,"a",0),e.NdJ("click",function(){return o.toggle()}),e._uU(1),e.ALo(2,"abpLocalization"),e._UZ(3,"i",1),e.qZA()),2&i&&(e.uIk("aria-expanded",o.expanded)("aria-controls",o.aId),e.xp6(1),e.hij(" ",e.lcZ(2,7,o.localizationSourceName+"::SeeAdvancedFilters")," "),e.xp6(2),e.ekj("fa-angle-down",o.expanded)("fa-angle-up",!o.expanded))},dependencies:[c.fuE],encapsulation:2})}return n})(),Q=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-advanced-entity-filters-form"]],ngContentSelectors:ue,decls:1,vars:0,template:function(i,o){1&i&&(e.F$t(),e.Hsn(0))},encapsulation:2})}return n})(),j=(()=>{class n{constructor(){this.filtersHidden=!0,this.localizationSourceName="",this.entityFilterPlaceholder=""}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-advanced-entity-filters"]],contentQueries:function(i,o,s){if(1&i&&e.Suo(s,Q,5),2&i){let r;e.iGM(r=e.CRH())&&(o.form=r.first)}},inputs:{list:"list",localizationSourceName:"localizationSourceName",entityFilterPlaceholder:"entityFilterPlaceholder"},ngContentSelectors:at,decls:6,vars:3,consts:[[1,"card"],[1,"card-body"],[1,"data-tables-filter"],[3,"list","placeholder"],[4,"ngIf"],[1,"mb-3","mt-3"],["aId","advanced-content-filters",3,"localizationSourceName","expanded","expandedChange"],["id","advanced-content-filters",3,"ngbCollapse"]],template:function(i,o){1&i&&(e.F$t(ot),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.TgZ(3,"div",2),e._UZ(4,"abp-entity-filter",3),e.qZA(),e.YNc(5,it,5,3,"ng-container",4),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("list",o.list)("placeholder",o.entityFilterPlaceholder),e.xp6(1),e.Q6J("ngIf",o.form))},dependencies:[g.O5,u._D,mt,me],encapsulation:2})}return n})(),O=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[g.ez,u.lQ,c.IR2,z]})}return n})(),ft=(()=>{class n{constructor(t,i){this.calendar=t,this.formatter=i}format(t,i){const o=this.isValid(t),s=this.isValid(i);let r="";return r=o&&s?this.formatter.format(o)+" - "+this.formatter.format(s):this.formatter.format(o),r}onDateSelection(t,i,o){const s={};if(i||o)if(i&&!o&&t&&t.after(i)){const r=this.calendar.getToday();r.day=i.day,r.month=i.month,r.year=i.year,s.fromDate=r,s.toDate=t}else i&&!o&&t&&t.equals(i)?(s.toDate=t,s.fromDate=t):(s.fromDate=t,s.toDate=null);else s.fromDate=t;return s}isHovered(t,i,o,s){return i&&!o&&s&&t.after(i)&&t.before(s)}isInside(t,i,o){return o&&t.after(i)&&t.before(o)}isRange(t,i,o){return t.equals(i)||o&&t.equals(o)||this.isInside(t,i,o)||this.isHovered(t,i,o)}isValid(t){const i=t?new u.qj(t.year,t.month,t.day):null;return this.calendar.isValid(i)?i:null}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(u.vL),e.LFG(u.NG))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bt=(()=>{class n extends c.ksn{get adapter(){return this.parentAdapter||this.selfAdapter}set fromDate(t){this.value={...this.value,[this.startDateProp]:this.adapter.toModel(t)}}set toDate(t){this.value={...this.value,[this.endDateProp]:this.adapter.toModel(t)}}constructor(t,i,o,s){super(t),this.parentAdapter=i,this.selfAdapter=o,this.dateRangePickerService=s,this.startDateProp="",this.endDateProp="",this.labelText="",this.hoveredDate=null,this.dates=""}writeValue(t){t&&(super.writeValue(t),this.format())}getFromDate(){return this.adapter.fromModel(this.value[this.startDateProp])}getToDate(){return this.adapter.fromModel(this.value[this.endDateProp])}format(){const t=this.dateRangePickerService.format(this.getFromDate(),this.getToDate());this.dates=t}onDateSelection(t){const i=this.dateRangePickerService.onDateSelection(t,this.getFromDate(),this.getToDate());this.fromDate=i.fromDate,this.toDate=i.toDate,this.format()}isHovered(t){return this.dateRangePickerService.isHovered(t,this.getFromDate(),this.getToDate(),this.hoveredDate)}isInside(t){return this.dateRangePickerService.isInside(t,this.getFromDate(),this.getToDate())}isRange(t){return this.dateRangePickerService.isRange(t,this.getFromDate(),this.getToDate())}isPrimary(t,i){return this.isRange(t)||i||this.isHovered(t)||this.isInside(t)}setToday(){const t=new Date,i=new u.qj(t.getFullYear(),t.getMonth()+1,t.getDate()),o=new u.qj(t.getFullYear(),t.getMonth()+1,t.getDate()+1);this.onDateSelection(i),this.onDateSelection(o)}cleanValue(){this.dates="",this.value={[this.startDateProp]:null,[this.endDateProp]:null}}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(e.zs3),e.Y36(u.DO,12),e.Y36(u.DO),e.Y36(ft))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-date-range-picker"]],inputs:{startDateProp:"startDateProp",endDateProp:"endDateProp",labelText:"labelText"},features:[e._Bn([{provide:l.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0}]),e.qOj],decls:13,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"input-group"],["class","input-group-text",4,"ngIf"],["readonly","","ngbDatepicker","","outsideDays","hidden","tabindex","-1","name","dpDates",1,"form-control","pe-0","cursor-pointer",3,"autoClose","displayMonths","dayTemplate","footerTemplate","value","dateSelect","click"],["dpDates","","datepicker","ngbDatepicker"],["class","btn btn-outline-secondary","type","button",3,"click",4,"ngIf"],["t",""],["footer",""],[1,"input-group-text"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["aria-hidden","true",1,"fas","fa-times"],["aria-hidden","true",1,"fas","fa-calendar"],[1,"abp-day",3,"mouseenter","mouseleave"],[1,"d-flex","gap-2","px-2","pb-2"],["buttonClass","btn btn-outline-secondary btn-sm","buttonType","button",3,"click"],["iconClass","fas fa-times","buttonClass","btn btn-outline-secondary btn-sm","buttonType","button",3,"click",4,"ngIf"],["iconClass","fas fa-times","buttonClass","btn btn-outline-secondary btn-sm","buttonType","button",3,"click"]],template:function(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,rt,2,1,"label",3),e.TgZ(4,"input",4,5),e.NdJ("dateSelect",function(h){return o.onDateSelection(h)})("click",function(){e.CHM(s);const h=e.MAs(6);return e.KtG(h.toggle())}),e.qZA(),e.YNc(7,lt,2,0,"button",6),e.YNc(8,ct,2,0,"button",6),e.YNc(9,pt,2,7,"ng-template",null,7,e.W1O),e.YNc(11,ut,5,4,"ng-template",null,8,e.W1O),e.qZA()()()}if(2&i){const s=e.MAs(10),r=e.MAs(12);e.xp6(3),e.Q6J("ngIf",o.labelText),e.xp6(1),e.Q6J("autoClose","outside")("displayMonths",2)("dayTemplate",s)("footerTemplate",r)("value",o.dates),e.xp6(3),e.Q6J("ngIf",o.dates),e.xp6(1),e.Q6J("ngIf",!o.dates)}},dependencies:[g.O5,u.J4,m.r0,c.fuE],styles:[".abp-day[_ngcontent-%COMP%]{text-align:center;display:inline-block;height:2rem;width:2rem;line-height:2rem}.abp-day.range[_ngcontent-%COMP%], .abp-day[_ngcontent-%COMP%]:hover{--bs-bg-opacity: 1;background-color:rgba(var(--bs-primary-rgb),var(--bs-bg-opacity));color:#fff}.abp-day.faded[_ngcontent-%COMP%]{--bs-bg-opacity: .5;background-color:rgba(var(--bs-primary-rgb),var(--bs-bg-opacity));color:#fff}"]})}return n})(),ge=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[{provide:u.DO,useClass:p._A}],imports:[g.ez,c.IR2,l.u5,u.M,m.e2]})}return n})(),_e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[c.IR2,m.e2,p.Ms,u.ZS,z,O,ge,ge,z,p.Ms,O]})}return n})(),vt=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[_e,_e]})}return n})();const L=new e.OlP("SHOW_ENTITY_HISTORY");var w=d(9752),Tt=d(9751),Ct=d(2722);function he(n){n||((0,e.gHi)(he),n=(0,e.f3M)(e.ktI));const a=new Tt.y(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe((0,Ct.R)(a))}class St extends Error{constructor(a,t){super(function xt(n,a){return`NG0${Math.abs(n)}${a?": "+a:""}`}(a,t)),this.code=a}}var Ft=d(2076),ye=d(3900),Ot=(d(9300),d(210));let W=(()=>{class n{constructor(){this.oAuthService=(0,e.f3M)(Ot.Ct),this.authService=(0,e.f3M)(c.e80),this.configState=(0,e.f3M)(c.XJE),this.environment=(0,e.f3M)(c.L$R)}isImpersonatorVisible(){const{currentUser:{impersonatorUserId:t}}=this.configState.getAll();return!!t}impersonateTenant(t,i){return this.impersonate({tenantId:t,tenantUserName:i})}impersonateUser(t){const{currentTenant:i}=this.configState.getAll();return this.impersonate({userId:t,tenantId:i.id})}impersonate({tenantId:t,userId:i,tenantUserName:o}){const s={};return t&&(s.TenantId=t),i&&(s.UserId=i),o&&(s.TenantUserName=o),this.environment.getEnvironment$().pipe((0,N.b)(({oAuthConfig:{responseType:r}})=>{"code"===r&&(this.oAuthService.oidc=!1)}),(0,ye.w)(()=>{const r=this.authService.loginUsingGrant("Impersonation",s);return(0,Ft.D)(r).pipe((0,N.b)(()=>location.href=this.environment.getEnvironment().application?.baseUrl||"/"))}))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();new e.OlP("PROFILE_PICTURE",{providedIn:"root",factory:()=>new J.X({type:"image",source:null})}),new e.OlP("ENABLE_FLAG_ICON");var C=(()=>((C=C||{})[C.None=0]="None",C[C.Gravatar=1]="Gravatar",C[C.Image=2]="Image",C))();(0,c.Uoq)(C),new e.OlP("NAVIGATE_TO_MY_SECURITY_LOGS",{providedIn:"root",factory:()=>{const n=(0,e.f3M)(c.L$R);return()=>{const a=n.getIssuer();window.open(`${a}Account/SecurityLogs?returnUrl=${window.location.href}`,"_self")}}}),new e.OlP("OPEN_MY_LINK_USERS_MODAL"),new e.OlP("OPEN_AUTHORITY_DELEGATION_MODAL");const qt=["canvas"];let xe,Ae=(()=>{class n{constructor(t,i){this.el=t,this.cdr=i,this.data={},this.options={},this.plugins=[],this.responsive=!0,this.dataSelect=new e.vpe,this.initialized=new e.vpe,this.initChart=()=>{const o=this.options||{};o.responsive=this.responsive,o.responsive&&(this.height||this.width)&&(o.maintainAspectRatio=!1),this.chart=new xe(this.canvas.nativeElement,{type:this.type,data:this.data,options:this.options})},this.getCanvas=()=>this.canvas.nativeElement,this.getBase64Image=()=>this.chart.toBase64Image(),this.generateLegend=()=>{if(this.chart)return this.chart.generateLegend()},this.refresh=()=>{this.chart&&(this.chart.update(),this.cdr.detectChanges())},this.reinit=()=>{this.chart&&(this.chart.destroy(),this.initChart())}}ngAfterViewInit(){d.e(58).then(d.bind(d,8058)).then(t=>{xe=t.default,this.initChart(),this.initialized.emit(!0)})}onCanvasClick(t){if(this.chart){const i=this.chart.getElementsAtEventForMode(t,"nearest",{intersect:!0},!1),o=this.chart.getElementsAtEventForMode(t,"dataset",{intersect:!0},!1);i&&i[0]&&o&&this.dataSelect.emit({originalEvent:t,element:i[0],dataset:o})}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=null)}ngOnChanges(t){this.chart&&(t.data?.currentValue||t.options?.currentValue)&&(this.chart.destroy(),this.initChart())}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(e.SBq),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-chart"]],viewQuery:function(i,o){if(1&i&&e.Gf(qt,5),2&i){let s;e.iGM(s=e.CRH())&&(o.canvas=s.first)}},inputs:{type:"type",data:"data",options:"options",plugins:"plugins",width:"width",height:"height",responsive:"responsive"},outputs:{dataSelect:"dataSelect",initialized:"initialized"},exportAs:["abpChart"],features:[e.TTD],decls:3,vars:6,consts:[[2,"position","relative"],[3,"click"],["canvas",""]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"canvas",1,2),e.NdJ("click",function(r){return o.onCanvasClick(r)}),e.qZA()()),2&i&&(e.Udp("width",o.responsive&&!o.width?null:o.width)("height",o.responsive&&!o.height?null:o.height),e.xp6(1),e.uIk("width",o.responsive&&!o.width?null:o.width)("height",o.responsive&&!o.height?null:o.height))},encapsulation:2,changeDetection:0})}return n})(),Jt=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[g.ez]})}return n})();function Yt(n){const a=[];for(let t=0;t<n;t++)a.push("rgba("+(t+5)*(t+5)*474%255+", "+(t+5)*(t+5)*1600%255+", "+(t+5)*(t+5)*84065%255+", 0.7)");return a}var Ne=d(672);function zt(n,a){1&n&&(e.TgZ(0,"h5",4),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"AbpUi::AreYouSure")," "))}function Qt(n,a){if(1&n&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.displayName)}}function jt(n,a){if(1&n&&(e.TgZ(0,"select",15)(1,"option",16),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.YNc(4,Qt,2,2,"option",17),e.qZA()),2&n){const t=e.oxw(4);e.xp6(2),e.Oqu(e.lcZ(3,3,t.loading()?"AbpUi::LoadingWithThreeDot":"Saas::SelectAnEditionToAssign")),e.xp6(2),e.Q6J("ngForOf",t.editions())("ngForTrackBy",t.trackByFn)}}function Bt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",9),e._UZ(2,"input",12),e.TgZ(3,"label",13),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()(),e.YNc(6,jt,5,5,"select",14),e.ALo(7,"async"),e.BQk()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("value",!0),e.xp6(2),e.Oqu(e.lcZ(5,3,"Saas::AssignTenantsToOtherEdition")),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,5,t.assignType$))}}function $t(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",8),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.TgZ(4,"div",9),e._UZ(5,"input",10),e.TgZ(6,"label",11),e._uU(7),e.ALo(8,"abpLocalization"),e.qZA()(),e.YNc(9,Bt,8,7,"ng-container",7),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,4,"Saas::ChooseAnAction",t.tenantCount)," "),e.xp6(3),e.Q6J("value",!1),e.xp6(2),e.Oqu(e.lcZ(8,7,"Saas::UnassignTheEditionFromTheTenants")),e.xp6(2),e.Q6J("ngIf",t.editions().length>0)}}function Gt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"p",5),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"form",6),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e.YNc(4,$t,10,9,"ng-container",7),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,3,"Saas::EditionDeletionConfirmationMessage",t.name)," "),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",t.tenantCount>0)}}function Ht(n,a){if(1&n&&(e.TgZ(0,"button",19),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"button",20),e._UZ(4,"i",21),e._uU(5),e.ALo(6,"abpLocalization"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,4,"AbpUi::Cancel")," "),e.xp6(2),e.Q6J("loading",t.loading())("disabled",t.form.invalid&&t.form.touched),e.xp6(2),e.hij(" ",e.lcZ(6,6,"AbpUi::Delete")," ")}}function Wt(n,a){1&n&&(e.TgZ(0,"h5",4),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Saas::MoveAllTenants")," "))}function Kt(n,a){if(1&n&&(e.TgZ(0,"option",10),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.displayName)}}function Xt(n,a){if(1&n){const t=e.EpF();e._UZ(0,"p",5),e.ALo(1,"abpLocalization"),e.TgZ(2,"form",6),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e.TgZ(3,"select",7)(4,"option",8),e._uU(5),e.ALo(6,"abpLocalization"),e.qZA(),e.YNc(7,Kt,2,2,"option",9),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("innerHTML",e.xi3(1,5,"Saas::MoveAllTenantsWithEditionTo",t.name),e.oJD),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(3),e.Oqu(e.lcZ(6,8,t.loading()?"AbpUi::LoadingWithThreeDot":"Saas::UnassignEdition")),e.xp6(2),e.Q6J("ngForOf",t.editions())("ngForTrackBy",t.trackByFn)}}function en(n,a){if(1&n&&(e.TgZ(0,"button",11),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"button",12),e._UZ(4,"i",13),e._uU(5),e.ALo(6,"abpLocalization"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,4,"AbpUi::Cancel")," "),e.xp6(2),e.Q6J("loading",t.loading())("disabled",t.form.invalid&&t.form.touched),e.xp6(2),e.hij(" ",e.lcZ(6,6,"AbpUi::Save")," ")}}function tn(n,a){if(1&n&&(e.TgZ(0,"h3"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,null!=t.selected&&t.selected.id?"Saas::Edit":"Saas::NewEdition"))}}function nn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"form",12),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.save())}),e.TgZ(1,"div",13),e._UZ(2,"abp-extensible-form",14),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("formGroup",t.editionForm),e.xp6(2),e.Q6J("selectedRecord",t.selected)}}function on(n,a){if(1&n&&e.YNc(0,nn,3,2,"form",11),2&n){const t=e.oxw();e.Q6J("ngIf",t.editionForm)}}function an(n,a){1&n&&(e.TgZ(0,"button",15),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"abp-button",16),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"Saas::Cancel")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"AbpIdentity::Save")))}function sn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"abp-feature-management",17),e.NdJ("visibleChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.visibleFeatures=o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("visible",t.visibleFeatures)("providerKey",t.providerKey)}}function rn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"abp-edition-delete",18),e.NdJ("visibleChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.onVisibleDeleteChange(o))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("visible",t.visibleEditionDelete)("selected",t.selected)}}function ln(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"abp-move-all-tenants",18),e.NdJ("visibleChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.onVisibleMoveChange(o))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("visible",t.visibleMove)("selected",t.selected)}}const cn=function(){return{value:"E"}},K=function(n){return{value:n}},Me=function(n){return{value:n,twoWay:!0}},De=function(n,a,t){return{providerName:n,providerKey:a,visible:t}},Ie=function(n){return{visibleChange:n}},ke=function(n,a){return{inputs:n,outputs:a,componentKey:"FeatureManagement.FeatureManagementComponent"}};function pn(n,a){1&n&&(e.TgZ(0,"div",4)(1,"label",10),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e._UZ(4,"input",11),e.qZA()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Saas::DisplayName:Default")))}function dn(n,a){if(1&n&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t.databaseName," ")}}function un(n,a){if(1&n&&(e.ynx(0),e.YNc(1,dn,2,2,"option",23),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",!t.connectionString)}}function mn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",29)(5,"button",30),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(9);return e.KtG(o.close())}),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA(),e.TgZ(8,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).index,s=e.oxw(3);return e.KtG(s.removeDbConnectionString(o))}),e._uU(9),e.ALo(10,"abpLocalization"),e.qZA()()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,3,"AbpUi::AreYouSure")),e.xp6(5),e.hij(" ",e.lcZ(7,5,"AbpUi::Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(10,7,"AbpUi::Yes")," "))}function gn(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.YNc(6,mn,11,9,"ng-template",null,25,e.W1O),e.TgZ(8,"button",26,27),e._UZ(10,"i",28),e.qZA()()()),2&n){const t=e.MAs(7),i=e.oxw().$implicit;e.xp6(2),e.Oqu(i.databaseName),e.xp6(2),e.Oqu(i.connectionString),e.xp6(4),e.Q6J("ngbPopover",t)}}function _n(n,a){if(1&n&&(e.ynx(0),e.YNc(1,gn,11,3,"tr",9),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.connectionString)}}function hn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",12)(2,"div",13)(3,"div",4)(4,"label",14),e._uU(5),e.ALo(6,"abpLocalization"),e.qZA(),e.TgZ(7,"select",15),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.selectedDatabase=o)}),e.YNc(8,un,2,1,"ng-container",16),e.qZA()()(),e.TgZ(9,"div",17)(10,"div",4)(11,"label",18),e._uU(12),e.ALo(13,"abpLocalization"),e.qZA(),e.TgZ(14,"input",19),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.databaseConnectionString=o)})("keyup.enter",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.addDatabaseConnectionString())}),e.qZA()()(),e.TgZ(15,"div",20)(16,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.addDatabaseConnectionString())}),e._uU(17),e.ALo(18,"abpLocalization"),e.qZA()()(),e.TgZ(19,"div",12)(20,"table",22)(21,"thead")(22,"tr")(23,"th"),e._uU(24),e.ALo(25,"abpLocalization"),e.qZA(),e.TgZ(26,"th"),e._uU(27),e.ALo(28,"abpLocalization"),e.qZA(),e.TgZ(29,"th"),e._uU(30),e.ALo(31,"abpLocalization"),e.qZA()()(),e.TgZ(32,"tbody"),e.YNc(33,_n,2,1,"ng-container",16),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,11,"Saas::DisplayName:DatabaseName")),e.xp6(2),e.Q6J("ngModel",t.selectedDatabase),e.xp6(1),e.Q6J("ngForOf",t.databases),e.xp6(4),e.Oqu(e.lcZ(13,13,"Saas::DisplayName:ConnectionString")),e.xp6(2),e.Q6J("ngModel",t.databaseConnectionString),e.xp6(2),e.Q6J("disabled",!t.databaseConnectionString||!t.selectedDatabase),e.xp6(1),e.hij(" ",e.lcZ(18,15,"Saas::AddDatabaseConnectionString")," "),e.xp6(7),e.Oqu(e.lcZ(25,17,"Saas::DisplayName:DatabaseName")),e.xp6(3),e.Oqu(e.lcZ(28,19,"Saas::DisplayName:ConnectionString")),e.xp6(3),e.Oqu(e.lcZ(31,21,"Saas::Actions")),e.xp6(3),e.Q6J("ngForOf",t.databases)}}function fn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",3),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.formSubmit.emit())}),e.TgZ(2,"div",4)(3,"div",5)(4,"input",6),e.NdJ("ngModelChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSharedDatabaseChange())}),e.qZA(),e.TgZ(5,"label",7),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA()()(),e.YNc(8,pn,5,3,"div",8),e.qZA(),e.YNc(9,hn,34,23,"ng-container",9),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(5),e.Oqu(e.lcZ(7,4,"Saas::DisplayName:UseSharedDatabase")),e.xp6(2),e.Q6J("ngIf",!t.form.get("useSharedDatabase").value),e.xp6(1),e.Q6J("ngIf",(null==t.databases?null:t.databases.length)&&!t.form.get("useSharedDatabase").value)}}function bn(n,a){1&n&&(e.TgZ(0,"div",32),e._UZ(1,"i",33),e.qZA())}function vn(n,a){if(1&n&&(e.TgZ(0,"h5"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE("",e.lcZ(2,2,"AbpIdentity::SetPassword")," - ",t.tenantName,"")}}function Tn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.MAs(1),s=e.oxw(2);return e.KtG(s.save(o))}),e.TgZ(2,"div",7)(3,"label",8),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA(),e._UZ(6,"input",9),e.ALo(7,"abpLocalization"),e.qZA(),e.TgZ(8,"div",7)(9,"label",10),e._uU(10),e.ALo(11,"abpLocalization"),e.qZA(),e.TgZ(12,"div",11),e._UZ(13,"input",12),e.TgZ(14,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.fieldTextType=!o.fieldTextType)}),e._UZ(15,"i"),e.qZA(),e.TgZ(16,"button",14),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.generatePassword())}),e.ALo(17,"abpLocalization"),e._UZ(18,"i",15),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.Q6J("formGroup",t.form)("markAsDirtyWhenSubmit",!1),e.xp6(4),e.Oqu(e.lcZ(5,10,"Saas::UserName")),e.xp6(2),e.s9C("ngbTooltip",e.lcZ(7,12,"Saas::UserNameTooltip")),e.xp6(4),e.Oqu(e.lcZ(11,14,"Saas::Password")),e.xp6(3),e.Q6J("type",t.fieldTextType?"text":"password"),e.xp6(2),e.Gre("fa fa-eye",t.fieldTextType?"":"-slash",""),e.xp6(1),e.s9C("ngbTooltip",e.lcZ(17,16,"AbpIdentity::GenerateRandomPasswordTooltip"))}}function Cn(n,a){if(1&n&&e.YNc(0,Tn,19,18,"form",4),2&n){const t=e.oxw();e.Q6J("ngIf",t.form)}}function yn(n,a){1&n&&(e.TgZ(0,"button",16),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"abp-button",17),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"Saas::Cancel")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"Saas::Save")))}const Sn=function(){return{size:"md"}};function xn(n,a){1&n&&(e.TgZ(0,"h3"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Saas::LoginWithThisTenant")))}function An(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"form",5),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.save())}),e.TgZ(1,"div",6)(2,"label",7),e._uU(3),e.ALo(4,"abpLocalization"),e.qZA(),e._UZ(5,"input",8),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("formGroup",t.formGroup),e.xp6(3),e.hij(" ",e.lcZ(4,2,"Saas::UserName"),"")}}function Nn(n,a){if(1&n&&e.YNc(0,An,6,4,"form",4),2&n){const t=e.oxw();e.Q6J("ngIf",t.formGroup)}}function Mn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.visibleChange(!1))}),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"button",10),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"Saas::Cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(5,4,"Saas::Login")," "))}const Dn=["tenantModalTemplate"],In=["connectionStringModalTemplate"];function kn(n,a){if(1&n&&(e.TgZ(0,"option",15),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&n){const t=a.$implicit;e.Q6J("ngValue",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,"Saas::Enum:TenantActivationState."+t.key)," ")}}function En(n,a){if(1&n&&(e.TgZ(0,"h3"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.selectedModalContent.title))}}function Fn(n,a){1&n&&e.GkF(0)}function On(n,a){if(1&n&&e.YNc(0,Fn,1,0,"ng-container",31),2&n){const t=e.oxw();e.Q6J("ngTemplateOutlet",null==t.selectedModalContent?null:t.selectedModalContent.template)}}function Ln(n,a){1&n&&(e.TgZ(0,"abp-button",36),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"AbpIdentity::Save")))}function wn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"abp-button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.save())}),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledSaveButton),e.xp6(1),e.Oqu(e.lcZ(2,2,"AbpIdentity::Save"))}}function Pn(n,a){if(1&n&&(e.TgZ(0,"button",32),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.ynx(3,33),e.YNc(4,Ln,3,3,"abp-button",34),e.YNc(5,wn,3,4,"abp-button",35),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,4,"Saas::Cancel")," "),e.xp6(2),e.Q6J("ngSwitch",null==t.selectedModalContent?null:t.selectedModalContent.type),e.xp6(1),e.Q6J("ngSwitchCase","saveTenant"),e.xp6(1),e.Q6J("ngSwitchCase","saveConnStr")}}function Zn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"abp-set-tenant-password-modal",39),e.NdJ("modalVisibleChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.closeSetTenantPasswordModal())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("modalVisible",t.isVisibleSetTenantPasswordModal)("tenantId",t.selectedTenantId)("tenantName",t.selectedTenantNameForSetTenantPasswordModal)}}function Rn(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Zn,1,3,"abp-set-tenant-password-modal",38),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("abpReplaceableTemplate",t.setTenantReplaceableTemplateOptions)}}function Un(n,a){1&n&&e.GkF(0)}function Vn(n,a){1&n&&e.GkF(0)}function qn(n,a){if(1&n&&e.YNc(0,Vn,1,0,"ng-container",31),2&n){e.oxw(2);const t=e.MAs(4);e.Q6J("ngTemplateOutlet",t)}}function Jn(n,a){1&n&&e.GkF(0)}function Yn(n,a){if(1&n&&e.YNc(0,Jn,1,0,"ng-container",31),2&n){e.oxw(2);const t=e.MAs(6);e.Q6J("ngTemplateOutlet",t)}}function zn(n,a){if(1&n&&(e.TgZ(0,"ul",43,44)(2,"li",45)(3,"a",46),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA(),e.YNc(6,qn,1,1,"ng-template",47),e.qZA(),e.TgZ(7,"li",45)(8,"a",46),e._uU(9),e.ALo(10,"abpLocalization"),e.qZA(),e.YNc(11,Yn,1,1,"ng-template",47),e.qZA()(),e._UZ(12,"div",48)),2&n){const t=e.MAs(1);e.Q6J("destroyOnHide",!1),e.xp6(4),e.Oqu(e.lcZ(5,4,"Saas::TenantBaseInfo")),e.xp6(5),e.Oqu(e.lcZ(10,6,"Saas::ConnectionStrings")),e.xp6(3),e.Q6J("ngbNavOutlet",t)}}function Qn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"form",50),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.save())}),e._UZ(1,"abp-extensible-form",51),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("formGroup",t.tenantForm),e.xp6(1),e.Q6J("selectedRecord",t.selected)}}function jn(n,a){if(1&n&&e.YNc(0,Qn,2,2,"form",49),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.tenantForm)}}function Bn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"abp-connection-strings",53),e.NdJ("formSubmit",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.save())}),e.qZA()}}const Ee=function(n){return{formSubmit:n}},$n=function(n,a){return{outputs:n,componentKey:a}};function Gn(n,a){if(1&n&&e.YNc(0,Bn,1,0,"abp-connection-strings",52),2&n){const t=e.oxw(2);e.Q6J("abpReplaceableTemplate",e.WLB(3,$n,e.VKq(1,Ee,t.save),t.connectionStringsReplacementKey))}}function Hn(n,a){if(1&n&&(e.YNc(0,Un,1,0,"ng-container",31),e.YNc(1,zn,13,8,"ng-template",null,40,e.W1O),e.YNc(3,jn,1,1,"ng-template",null,41,e.W1O),e.YNc(5,Gn,1,6,"ng-template",null,42,e.W1O)),2&n){const t=e.MAs(2),i=e.MAs(4),o=e.oxw();e.Q6J("ngTemplateOutlet",null!=o.selected&&o.selected.id?i:t)}}function Wn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"abp-connection-strings",55),e.NdJ("formSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.save())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("selectedTenant",t.selected)}}const Kn=function(n){return{selectedTenant:n}},Xn=function(n,a,t){return{inputs:n,outputs:a,componentKey:t}};function ei(n,a){if(1&n&&e.YNc(0,Wn,1,1,"abp-connection-strings",54),2&n){const t=e.oxw();e.Q6J("abpReplaceableTemplate",e.kEZ(7,Xn,e.VKq(3,Kn,e.VKq(1,K,t.selected)),e.VKq(5,Ee,t.save),t.connectionStringsReplacementKey))}}function ti(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"abp-feature-management",56),e.NdJ("visibleChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.visibleFeatures=o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("visible",t.visibleFeatures)("providerKey",t.providerKey)}}const ni=function(){return{size:"lg"}},ii=function(){return{value:"T"}};function oi(n,a){if(1&n&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5",4),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6),e._UZ(8,"abp-chart",7,8),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"Saas::EditionUsageStatistics")),e.xp6(4),e.Q6J("data",t.chartData)("width",t.width)("height",t.height)}}function ai(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=a.$implicit,i=a.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.editionName)}}function si(n,a){if(1&n&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5",4),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()(),e.TgZ(6,"div",5)(7,"div")(8,"table",6)(9,"thead")(10,"tr")(11,"th"),e._uU(12,"#"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"abpLocalization"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"abpLocalization"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,ai,7,3,"tr",7),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,7,"Saas::LatestTenants")),e.xp6(3),e.Udp("min-height",t.minHeight,"px"),e.xp6(7),e.Oqu(e.lcZ(15,9,"Saas::Name")),e.xp6(3),e.Oqu(e.lcZ(18,11,"Saas::EditionName")),e.xp6(3),e.Q6J("ngForOf",t.data)("ngForTrackBy",t.trackByFn)}}function Fe(){return n=>{const a=n.get("assignType")?.value,t=n.get("edition")?.value;return!a||a&&t?null:{required:!0}}}let Oe=(()=>{class n{constructor(){this.visibleChange=new e.vpe,this.loading=(0,e.tdS)(!1),this.#e=(0,e.tdS)([]),this.editions=(0,e.Flj)(()=>this.#e().filter(t=>!this.selected||t.id!==this.selected?.id)),this.trackByService=(0,e.f3M)(c.vR3),this.trackByFn=this.trackByService.by("id"),this.editionService=(0,e.f3M)(I),this.fb=(0,e.f3M)(l.qu),this.form=this.fb.group({assignType:[!1],edition:["",[]]},{validators:n=>{const a=n.get("assignType")?.value,t=n.get("edition")?.value;return!a||a&&t?null:{required:!0}}})}#e;get tenantCount(){return this.selected?.tenantCount||0}get name(){return this.selected?.displayName||""}get assignType$(){return this.form.controls.assignType.valueChanges}onVisibleChange(t){this.visibleChange.emit({visible:t,refresh:!1})}ngOnInit(){this.loading.set(!0),this.editionService.getAllList().pipe((0,M.x)(()=>this.loading.set(!1))).subscribe(t=>this.#e.set(t))}save(){var t=this;return(0,pe.Z)(function*(){if(t.form.invalid)return;t.loading.set(!0);const{assignType:i,edition:o}=t.form.value;if(i){const r=t.editionService.moveAllTenants(t.selected.id,o);yield(0,q.z)(r)}const s=t.editionService.delete(t.selected.id);yield(0,q.z)(s),t.loading.set(!1),t.visibleChange.emit({visible:!1,refresh:!0})})()}static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-edition-delete"]],inputs:{visible:"visible",selected:"selected"},outputs:{visibleChange:"visibleChange"},standalone:!0,features:[e.jDz],decls:7,vars:2,consts:[[3,"visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[1,"modal-title"],[1,"fw-bold"],["id","edition-delete-form",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"mt-2"],[1,"form-check","mt-2"],["formControlName","assignType","type","radio","name","assignType","id","unassign",1,"form-check-input",3,"value"],["for","unassign",1,"form-check-label"],["formControlName","assignType","type","radio","name","assignType","id","assign",1,"form-check-input",3,"value"],["for","assign",1,"form-check-label"],["class","form-select mt-2","formControlName","edition",4,"ngIf"],["formControlName","edition",1,"form-select","mt-2"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],["abpClose","","type","button",1,"btn","btn-secondary"],["type","submit","form","edition-delete-form",1,"btn","btn-primary",3,"loading","disabled"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(i,o){1&i&&(e.TgZ(0,"abp-modal",0),e.NdJ("visibleChange",function(r){return o.onVisibleChange(r)}),e.YNc(1,zt,3,3,"ng-template",null,1,e.W1O),e.YNc(3,Gt,5,6,"ng-template",null,2,e.W1O),e.YNc(5,Ht,7,8,"ng-template",null,3,e.W1O),e.qZA()),2&i&&e.Q6J("visible",o.visible)("suppressUnsavedChangesWarning",!0)},dependencies:[g.ez,g.sg,g.O5,g.Ov,m.e2,f.hL,f.J5,m.zS,m.YM,c.IR2,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l._,l.JJ,l.JL,l.sg,l.u,c.fuE,c.YzZ],encapsulation:2})}return n})(),Le=(()=>{class n{constructor(){this.visibleChange=new e.vpe,this.loading=(0,e.tdS)(!1),this.#e=(0,e.tdS)([]),this.editions=(0,e.Flj)(()=>this.#e().filter(t=>!this.selected||t.id!==this.selected?.id)),this.trackByService=(0,e.f3M)(c.vR3),this.trackByFn=this.trackByService.by("id"),this.editionService=(0,e.f3M)(I),this.fb=(0,e.f3M)(l.qu),this.form=this.fb.group({edition:[""]})}#e;get name(){return this.selected?.displayName||""}onVisibleChange(t){this.visibleChange.emit({visible:t,refresh:!1})}ngOnInit(){this.loading.set(!0),this.editionService.getAllList().pipe((0,M.x)(()=>this.loading.set(!1))).subscribe(t=>this.#e.set(t))}save(){var t=this;return(0,pe.Z)(function*(){if(t.form.invalid)return;t.loading.set(!0);const{edition:i}=t.form.value,o=t.editionService.moveAllTenants(t.selected.id,i);yield(0,q.z)(o),t.loading.set(!1),t.visibleChange.emit({visible:!1,refresh:!0})})()}static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-move-all-tenants"]],inputs:{visible:"visible",selected:"selected"},outputs:{visibleChange:"visibleChange"},standalone:!0,features:[e.jDz],decls:7,vars:2,consts:[[3,"visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[1,"modal-title"],[3,"innerHTML"],["id","edition-move-tenants-form",3,"formGroup","ngSubmit"],["formControlName","edition",1,"form-select","mt-2"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],["abpClose","","type","button",1,"btn","btn-secondary"],["type","submit","form","edition-move-tenants-form",1,"btn","btn-primary",3,"loading","disabled"],["aria-hidden","true",1,"fa","fa-check","me-1"]],template:function(i,o){1&i&&(e.TgZ(0,"abp-modal",0),e.NdJ("visibleChange",function(r){return o.onVisibleChange(r)}),e.YNc(1,Wt,3,3,"ng-template",null,1,e.W1O),e.YNc(3,Xt,8,10,"ng-template",null,2,e.W1O),e.YNc(5,en,7,8,"ng-template",null,3,e.W1O),e.qZA()),2&i&&e.Q6J("visible",o.visible)("suppressUnsavedChangesWarning",!0)},dependencies:[g.ez,g.sg,m.e2,f.hL,f.J5,m.zS,m.YM,c.IR2,l._Y,l.YN,l.Kr,l.EJ,l.JJ,l.JL,l.sg,l.u,c.fuE,c.YzZ],encapsulation:2})}return n})(),y=(()=>{class n{constructor(t,i,o,s,r){this.list=t,this.service=i,this.injector=o,this.confirmationService=s,this.destroyRef=r,this.data={items:[],totalCount:0},this.plans$=new J.X([]),this.visibleMove=!1,this.isModalVisible=!1,this.visibleEditionDelete=!1,this.visibleFeatures=!1,this.modalBusy=!1,this.onVisibleFeaturesChange=h=>{this.visibleFeatures=h}}ngOnInit(){this.hookToQuery()}hookToQuery(){this.list.hookToQuery(t=>this.service.getList(t)).subscribe(t=>this.data=t)}createEditionForm(){this.getPlanLookup(()=>{const t=new p.lg(this.injector,this.selected);this.editionForm=(0,p.se)(t)})}onAddEdition(){this.selected={},this.createEditionForm(),this.isModalVisible=!0}onEditEdition(t){this.service.get(t).subscribe(i=>{this.selected=i,this.createEditionForm(),this.isModalVisible=!0})}save(){if(!this.editionForm.valid)return;this.modalBusy=!0;const{id:t}=this.selected;(t?this.service.update(t,{...this.selected,...this.editionForm.value}):this.service.create(this.editionForm.value)).pipe((0,M.x)(()=>this.modalBusy=!1)).subscribe(()=>{this.list.get(),this.isModalVisible=!1})}openFeaturesModal(t){this.providerKey=t,setTimeout(()=>{this.visibleFeatures=!0},0)}getPlanLookup(t){this.service.getPlanLookup().subscribe(i=>{this.plans$.next(i),t()})}delete(t){this.selected=t,this.visibleEditionDelete=!0}onVisibleDeleteChange(t){t.visible||(t.refresh&&this.list.get(),this.selected=null,this.visibleEditionDelete=!1)}moveAllTenants(t){0!==t.tenantCount?(this.selected=t,this.visibleMove=!0):this.confirmationService.warn("Saas::ThereIsNoTenantsCurrentlyInThisEdition","AbpUi::Warning",{hideCancelBtn:!0,yesText:"AbpUi::Ok"}).pipe(he(this.destroyRef)).subscribe()}onVisibleMoveChange(t){t.visible||(t.refresh&&this.list.get(),this.selected=null,this.visibleMove=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(c.XNV),e.Y36(I),e.Y36(e.zs3),e.Y36(m.YP),e.Y36(e.ktI))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-editions"]],standalone:!0,features:[e._Bn([c.XNV,{provide:p.ex,useValue:"Saas.EditionsComponent"}]),e.jDz],decls:16,vars:27,consts:[[3,"title","toolbar"],["id","wrapper"],["localizationSourceName","Saas",3,"list"],[1,"card"],[3,"data","recordsTotal","list"],[3,"visible","busy","visibleChange","disappear"],["abpHeader",""],["abpBody",""],["abpFooter",""],["providerName","E",3,"visible","providerKey","visibleChange",4,"abpReplaceableTemplate"],[3,"visible","selected","visibleChange",4,"ngIf"],["id","editionForm","validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["id","editionForm","validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mt-2"],[3,"selectedRecord"],["abpClose","","type","button",1,"btn","btn-secondary"],["iconClass","fa fa-check","buttonType","submit","formName","editionForm"],["providerName","E",3,"visible","providerKey","visibleChange"],[3,"visible","selected","visibleChange"]],template:function(i,o){1&i&&(e.TgZ(0,"abp-page",0),e.ALo(1,"abpLocalization"),e.TgZ(2,"div",1),e._UZ(3,"abp-advanced-entity-filters",2),e.TgZ(4,"div",3),e._UZ(5,"abp-extensible-table",4),e.qZA()()(),e.TgZ(6,"abp-modal",5),e.NdJ("visibleChange",function(r){return o.isModalVisible=r})("disappear",function(){return o.createEditionForm()}),e.YNc(7,tn,3,3,"ng-template",null,6,e.W1O),e.YNc(9,on,1,1,"ng-template",null,7,e.W1O),e.YNc(11,an,6,6,"ng-template",null,8,e.W1O),e.qZA(),e.YNc(13,sn,1,2,"abp-feature-management",9),e.YNc(14,rn,1,2,"abp-edition-delete",10),e.YNc(15,ln,1,2,"abp-move-all-tenants",10)),2&i&&(e.Q6J("title",e.lcZ(1,11,"Saas::Editions"))("toolbar",o.data.items),e.xp6(3),e.Q6J("list",o.list),e.xp6(2),e.Q6J("data",o.data.items)("recordsTotal",o.data.totalCount)("list",o.list),e.xp6(1),e.Q6J("visible",o.isModalVisible)("busy",o.modalBusy),e.xp6(7),e.Q6J("abpReplaceableTemplate",e.WLB(24,ke,e.kEZ(18,De,e.DdM(13,cn),e.VKq(14,K,o.providerKey),e.VKq(16,Me,o.visibleFeatures)),e.VKq(22,Ie,o.onVisibleFeaturesChange))),e.xp6(1),e.Q6J("ngIf",o.visibleEditionDelete),e.xp6(1),e.Q6J("ngIf",o.visibleMove))},dependencies:[Oe,Le,f.h2,f.hL,c.IR2,g.O5,l._Y,l.JL,l.sg,c.fuE,c.YzZ,c.zLP,F.BG,F.II,p.gt,p.m5,m.e2,m.r0,m.zS,m.YM,O,j,w.XE,w.$],encapsulation:2})}return n})(),U=(()=>{class n{constructor(t,i){this.fb=t,this.service=i,this.formSubmit=new e.vpe,this.form=this.fb.group({useSharedDatabase:[!0],defaultConnectionString:[null]})}ngOnInit(){this.getInitialData()}getInitialData(){this.loading=!0,(this.selectedTenant?this.getConnectionStrings():this.getDatabases()).pipe((0,M.x)(()=>this.loading=!1)).subscribe()}selectFirstDatabase(){this.selectedDatabase=this.databases?.find(t=>!t.connectionString)}getDatabases(){return this.service.getDatabases().pipe((0,N.b)(t=>{this.databases=(t.databases||[]).map(i=>({id:"",databaseName:i,connectionString:null,extraProperties:null})),this.selectFirstDatabase()}))}getConnectionStrings(){return this.service.getConnectionStrings(this.selectedTenant.id).pipe((0,N.b)(t=>{this.form.setValue({useSharedDatabase:!t.default&&!t.databases.some(i=>!!i.connectionString),defaultConnectionString:t.default}),this.databases=t.databases,this.selectFirstDatabase()}))}onSharedDatabaseChange(){const t=this.form.get("defaultConnectionString");this.form.patchValue({defaultConnectionString:null}),t.updateValueAndValidity()}addDatabaseConnectionString(){if(!this.databaseConnectionString)return;const t=this.databases.findIndex(i=>i.databaseName===this.selectedDatabase.databaseName);this.databases[t].connectionString=this.databaseConnectionString,this.databaseConnectionString=null,this.selectFirstDatabase()}removeDbConnectionString(t){this.databases[t].connectionString=null}getInput(){const{useSharedDatabase:t,defaultConnectionString:i}=this.form.value;return t?{extraProperties:void 0,id:"",default:null,databases:[]}:{extraProperties:void 0,id:"",default:i,databases:this.databases.filter(o=>o.connectionString)}}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(l.QS),e.Y36(E))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-connection-strings"]],inputs:{selectedTenant:"selectedTenant"},outputs:{formSubmit:"formSubmit"},decls:4,vars:2,consts:[[1,"mt-2"],[4,"ngIf","ngIfElse"],["loadingTmp",""],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-check","mb-2"],["id","useSharedDatabase","type","checkbox","formControlName","useSharedDatabase","autofocus","",1,"form-check-input",3,"ngModelChange"],["for","useSharedDatabase",1,"form-check-label"],["class","mb-3",4,"ngIf"],[4,"ngIf"],["for","defaultConnectionString",1,"form-label"],["type","text","id","defaultConnectionString","formControlName","defaultConnectionString",1,"form-control"],[1,"form-row"],[1,"form-group","col-md-3"],["for","database-name",1,"form-label"],["id","database-name","name","database-name",1,"form-select","form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"mb-3","col-md-7"],["for","connection-string",1,"form-label"],["type","text","id","connection-string","name","connection-string",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"mb-3","col-md-2","mt-4","d-grid"],["id","add-database-connection-string","type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"table"],[3,"ngValue",4,"ngIf"],[3,"ngValue"],["popContent",""],["placement","left",1,"btn","btn-sm","btn-danger",3,"ngbPopover"],["popover","ngbPopover"],["aria-hidden","true",1,"fas","fa-trash"],[1,"text-end"],[1,"btn","btn-sm","btn-light","me-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"text-center"],["aria-hidden","true",1,"fas","fa-spinner","fa-spin","fa-lg"]],template:function(i,o){if(1&i&&(e.TgZ(0,"div",0),e.YNc(1,fn,10,6,"ng-container",1),e.YNc(2,bn,2,0,"ng-template",null,2,e.W1O),e.qZA()),2&i){const s=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!o.loading)("ngIfElse",s)}},dependencies:[f.hL,f.J5,g.sg,g.O5,l._Y,l.YN,l.Kr,l.Fj,l.Wl,l.EJ,l.JJ,l.JL,l.On,l.sg,l.u,c.Uqp,c.YzZ,u.o8,c.fuE],encapsulation:2})}return n})(),X=(()=>{class n{constructor(t,i,o){this.fb=t,this.tenantService=i,this.toaster=o,this.modalVisible=!1,this.tenantId="",this.modalVisibleChange=new e.vpe,this.fieldTextType=!1}buildForm(){this.form=this.fb.group({adminName:["admin",[l.Validators.required]],password:["",[l.Validators.required]]})}save(t){if(this.form.invalid)return;const{adminName:i,password:o}=this.form.value;this.modalBusy=!0,this.tenantService.setPassword(this.tenantId,{username:i,password:o}).subscribe(()=>{this.toaster.success("AbpIdentity::PasswordChangedMessage"),t.resetForm(),this.modalVisibleChange.emit()}).add(()=>this.modalBusy=!1)}onModalVisibleChange(t){t||this.modalVisibleChange.emit()}ngOnChanges({modalVisible:t}){t&&t.currentValue&&this.buildForm()}generatePassword(){const t=(0,c.F2m)();this.form.controls.password.setValue(t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(l.qu),e.Y36(E),e.Y36(m.MJ))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-set-tenant-password-modal"]],inputs:{modalVisible:"modalVisible",tenantName:"tenantName",tenantId:"tenantId"},outputs:{modalVisibleChange:"modalVisibleChange"},features:[e.TTD],decls:7,vars:4,consts:[[3,"visible","busy","options","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],["id","setPasswordForm","validateOnSubmit","",3,"formGroup","markAsDirtyWhenSubmit","ngSubmit",4,"ngIf"],["id","setPasswordForm","validateOnSubmit","",3,"formGroup","markAsDirtyWhenSubmit","ngSubmit"],["ngForm","ngForm"],[1,"mb-3"],["for","adminName",1,"form-label"],["type","text","id","adminName","name","adminName","formControlName","adminName",1,"form-control",3,"ngbTooltip"],["for","password",1,"form-label"],["validationStyle","","validationTarget","",1,"input-group"],["id","password","name","password","formControlName","password","autofocus","",1,"form-control","flex-fill",3,"type"],["type","button",1,"btn","btn-secondary",3,"click"],["id","generate-random-password-button","type","button",1,"btn","btn-primary",3,"ngbTooltip","click"],["aria-hidden","true",1,"fa","fa-refresh"],["type","button","abpClose","",1,"btn","btn-secondary"],["iconClass","fa fa-check","buttonType","submit","formName","setPasswordForm"]],template:function(i,o){1&i&&(e.TgZ(0,"abp-modal",0),e.NdJ("visibleChange",function(r){return o.modalVisible=r})("visibleChange",function(r){return o.onModalVisibleChange(r)}),e.YNc(1,vn,3,4,"ng-template",null,1,e.W1O),e.YNc(3,Cn,1,1,"ng-template",null,2,e.W1O),e.YNc(5,yn,6,6,"ng-template",null,3,e.W1O),e.qZA()),2&i&&e.Q6J("visible",o.modalVisible)("busy",o.modalBusy)("options",e.DdM(3,Sn))},dependencies:[f.hL,f.Wh,f.kG,f.J5,g.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,c.Uqp,c.YzZ,m.r0,m.zS,m.YM,u._L,c.fuE],encapsulation:2})}return n})(),ee=(()=>{class n{constructor(){this.store=new c.gSB({tenantId:null,isVisible:void 0}),this.isVisible$=this.store.sliceState(t=>t.isVisible)}get tenantId(){return this.store.state.tenantId}setValue(t){this.store.patch({isVisible:t})}setTenantId(t){this.store.patch({tenantId:t})}hide(){this.setValue(!1),this.setTenantId(null)}show(t){this.setValue(!0),this.setTenantId(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),te=(()=>{class n{constructor(t,i,o,s,r){this.service=t,this.fb=i,this.impersonationService=o,this.subscription=s,this.confirmation=r,this.defaultTenantUserName="admin",this.buildForm()}get isVisible$(){return this.service.isVisible$}visibleChange(t){void 0===t||t||(this.service.setValue(t),this.reset())}save(){if(this.formGroup.invalid)return;const o=this.impersonationService.impersonateTenant(this.service.tenantId,this.formGroup.value.tenantUserName);this.subscription.addOne(o,()=>this.success(),s=>{this.error(s)})}success(){this.reset()}reset(){this.service.hide(),this.formGroup.reset({tenantUserName:this.defaultTenantUserName})}buildForm(){this.formGroup=this.fb.group({tenantUserName:[this.defaultTenantUserName,[l.Validators.required]]})}error(t){this.subscription.addOne(this.confirmation.error(t.error.error_description,t.error.error,{hideCancelBtn:!0,yesText:"AbpUi::Ok"})),console.error(t.error)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(ee),e.Y36(l.qu),e.Y36(W),e.Y36(c.FFO),e.Y36(m.YP))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-impersonate-tenant-modal"]],features:[e._Bn([c.FFO])],decls:8,vars:3,consts:[[3,"visible","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],["id","impersonateTenantForm",3,"formGroup","ngSubmit",4,"ngIf"],["id","impersonateTenantForm",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","tenantUserName",1,"form-label"],["type","text","name","tenantUserName","id","tenantUserName","formControlName","tenantUserName",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["form","impersonateTenantForm","type","submit",1,"btn","btn-primary"]],template:function(i,o){1&i&&(e.TgZ(0,"abp-modal",0),e.NdJ("visibleChange",function(r){return o.visibleChange(r)}),e.ALo(1,"async"),e.YNc(2,xn,3,3,"ng-template",null,1,e.W1O),e.YNc(4,Nn,1,1,"ng-template",null,2,e.W1O),e.YNc(6,Mn,6,6,"ng-template",null,3,e.W1O),e.qZA()),2&i&&e.Q6J("visible",e.lcZ(1,1,o.isVisible$))},dependencies:[f.hL,f.J5,g.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,c.YzZ,m.zS,g.Ov,c.fuE],encapsulation:2})}return n})(),v=(()=>{class n{get hasSelectedTenant(){return!!this.selected.id}get isDisabledSaveButton(){if(!this.selectedModalContent)return!1;const{type:t}=this.selectedModalContent,i=this.connectionStringsRef?.form.invalid;return!("saveConnStr"!==t||!i)||"saveTenant"===t&&this.tenantForm&&this.tenantForm.invalid}constructor(t,i,o,s,r,h,x){this.list=t,this.confirmationService=i,this.service=o,this.fb=s,this.injector=r,this.toaster=h,this.editionService=x,this.data={items:[],totalCount:0},this.selectedModalContent={},this.visibleFeatures=!1,this.isVisibleSetTenantPasswordModal=!1,this.selectedTenantId="",this.selectedTenantNameForSetTenantPasswordModal="",this.modalBusy=!1,this.emptyOption={label:"-",value:null},this.connectionStringsReplacementKey="Saas.ConnectionStringsComponent",this.setTenantPasswordReplacementKey="Saas.SetTenantPasswordComponent",this.activationStateOptions=Xe,this.setTenantReplaceableTemplateOptions=null,this.onVisibleFeaturesChange=A=>{this.visibleFeatures=A},this.closeSetTenantPasswordModal=()=>{this.isVisibleSetTenantPasswordModal=!1,this.selectedTenantNameForSetTenantPasswordModal="",this.selectedTenantId="",this.setTenantReplaceableTemplateOptions=null}}ngOnInit(){this.buildForm(),this.hookToQuery()}clearFilters(){this.formFilters.reset()}hookToQuery(){this.list.hookToQuery(t=>{const i={...this.formFilters.value,...this.formFilters.value.times};return this.service.getList({...t,...i})}).subscribe(t=>this.data=t)}createTenantForm(){return this.editionService.getList({maxResultCount:1e3}).pipe((0,N.b)(t=>{this.editions=t.items;const i=new p.lg(this.injector,this.selected);this.tenantForm=(0,p.se)(i),this.tenantForm.controls.editionId.patchValue(null)}))}openModal(t,i,o){this.selectedModalContent={title:t,template:i,type:o},this.isModalVisible=!0}onEditConnectionString(t){this.selected=t,this.openModal("Saas::ConnectionStrings",this.connectionStringModalTemplate,"saveConnStr")}onAddTenant(){this.selected={},this.createTenantForm().subscribe(()=>this.openModal("Saas::NewTenant",this.tenantModalTemplate,"saveTenant"))}onEditTenant(t){this.service.get(t).subscribe(i=>{this.selected=i,this.createTenantForm().subscribe(()=>this.openModal("Saas::Edit",this.tenantModalTemplate,"saveTenant"))})}save(){const{type:t}=this.selectedModalContent||{};"saveTenant"!==t?"saveConnStr"===t&&this.saveConnectionString():this.saveTenant()}saveConnectionString(){this.modalBusy||this.connectionStringsRef.form.invalid||this.service.updateConnectionStrings(this.selected.id,this.connectionStringsRef.getInput()).pipe((0,M.x)(()=>this.modalBusy=!1)).subscribe(()=>{this.isModalVisible=!1,this.list.get()})}saveTenant(){if(!this.tenantForm.valid||this.modalBusy)return;this.modalBusy=!0;const{activationEndDate:t}=this.tenantForm.value,i={...this.tenantForm.value,...t&&{activationEndDate:new Date(t).toLocalISOString()},...!this.selected.id&&{connectionStrings:this.connectionStringsRef.getInput()}},{id:o}=this.selected;(o?this.service.update(o,{...this.selected,...i}):this.service.create(i)).pipe((0,M.x)(()=>this.modalBusy=!1)).subscribe(()=>{this.list.get(),this.isModalVisible=!1})}delete(t,i){this.confirmationService.warn("Saas::TenantDeletionConfirmationMessage","Saas::AreYouSure",{messageLocalizationParams:[i]}).subscribe(o=>{o===m.Tv.Status.confirm&&this.service.delete(t).subscribe(()=>this.list.get())})}onSharedDatabaseChange(t){t||setTimeout(()=>{const i=document.getElementById("defaultConnectionString");i&&i.focus()},0)}openFeaturesModal(t){this.providerKey=t,setTimeout(()=>{this.visibleFeatures=!0},0)}openSetTenantPasswordModal(t,i){this.isVisibleSetTenantPasswordModal=!0,this.selectedTenantNameForSetTenantPasswordModal=i,this.selectedTenantId=t,this.setTenantReplaceableTemplateOptions={outputs:{modalVisibleChange:this.closeSetTenantPasswordModal},inputs:{modalVisible:{value:this.isVisibleSetTenantPasswordModal},tenantId:{value:this.selectedTenantId},tenantName:{value:this.selectedTenantNameForSetTenantPasswordModal}},componentKey:this.setTenantPasswordReplacementKey}}applyDatabaseMigrations(t){this.service.applyDatabaseMigrations(t).subscribe(()=>this.toaster.info("Saas::DatabaseMigrationQueuedAndWillBeApplied","",{life:6e3}))}buildForm(){this.formFilters=this.fb.group({getEditionNames:[null,[]],editionId:[null,[]],times:[{}],activationState:[null,[]]})}getData(){this.formFilters.invalid&&this.formFilters.touched||this.list.get()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(c.XNV),e.Y36(m.YP),e.Y36(E),e.Y36(l.QS),e.Y36(e.zs3),e.Y36(m.MJ),e.Y36(I))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-tenants"]],viewQuery:function(i,o){if(1&i&&(e.Gf(U,5),e.Gf(Dn,5),e.Gf(In,5)),2&i){let s;e.iGM(s=e.CRH())&&(o.connectionStringsRef=s.first),e.iGM(s=e.CRH())&&(o.tenantModalTemplate=s.first),e.iGM(s=e.CRH())&&(o.connectionStringModalTemplate=s.first)}},features:[e._Bn([c.XNV,{provide:p.ex,useValue:"Saas.TenantsComponent"},{provide:u.DO,useClass:p._A}])],decls:59,vars:52,consts:[[3,"title","toolbar"],["id","wrapper"],["localizationSourceName","Saas",3,"list"],[3,"formGroup"],["filterForm",""],[1,"row"],[1,"col-12","col-sm-3"],[1,"mb-3"],["for","editionIdFilter",1,"form-label"],["cid","editionIdFilter","formControlName","editionId",3,"emptyOption","getFn"],[1,"form-label",3,"ngbTooltip"],["aria-hidden","true",1,"fa","fa-info-circle"],["formControlName","times","startDateProp","fromDate","endDateProp","toDate"],["for","activationState",1,"form-label"],["id","activationState","formControlName","activationState",1,"form-select","form-control"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-12","col-sm-auto","align-self-end","mb-3"],[1,"col-6","col-sm-auto","d-grid"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"card"],[3,"data","recordsTotal","list"],[3,"visible","busy","options","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[4,"ngIf"],["tenantModalTemplate",""],["connectionStringModalTemplate",""],["providerName","T",3,"visible","providerKey","visibleChange",4,"abpReplaceableTemplate"],[4,"ngTemplateOutlet"],["abpClose","","type","button",1,"btn","btn-secondary"],[3,"ngSwitch"],["iconClass","fa fa-check","buttonType","submit","formName","editOrCreateForm",4,"ngSwitchCase"],["iconClass","fa fa-check",3,"disabled","click",4,"ngSwitchCase"],["iconClass","fa fa-check","buttonType","submit","formName","editOrCreateForm"],["iconClass","fa fa-check",3,"disabled","click"],[3,"modalVisible","tenantId","tenantName","modalVisibleChange",4,"abpReplaceableTemplate"],[3,"modalVisible","tenantId","tenantName","modalVisibleChange"],["createTenantTmp",""],["tenantFormTmp",""],["connectionStrings",""],["ngbNav","",1,"nav-tabs",3,"destroyOnHide"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],["class","py-2","id","editOrCreateForm","validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["id","editOrCreateForm","validateOnSubmit","",1,"py-2",3,"formGroup","ngSubmit"],[3,"selectedRecord"],[3,"formSubmit",4,"abpReplaceableTemplate"],[3,"formSubmit"],[3,"selectedTenant","formSubmit",4,"abpReplaceableTemplate"],[3,"selectedTenant","formSubmit"],["providerName","T",3,"visible","providerKey","visibleChange"]],template:function(i,o){1&i&&(e.TgZ(0,"abp-page",0),e.ALo(1,"abpLocalization"),e.TgZ(2,"div",1)(3,"abp-advanced-entity-filters",2)(4,"abp-advanced-entity-filters-form")(5,"form",3,4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),e._uU(11),e.ALo(12,"abpLocalization"),e.qZA(),e._UZ(13,"abp-lookup-select",9),e.qZA()(),e.TgZ(14,"div",6)(15,"div",7)(16,"label",10),e.ALo(17,"abpLocalization"),e._uU(18),e.ALo(19,"abpLocalization"),e._UZ(20,"i",11),e.qZA(),e._UZ(21,"abp-date-range-picker",12),e.qZA()(),e.TgZ(22,"div",6)(23,"div",7)(24,"label",13),e._uU(25),e.ALo(26,"abpLocalization"),e.qZA(),e.TgZ(27,"select",14)(28,"option",15),e._uU(29,"-"),e.qZA(),e.YNc(30,kn,3,4,"option",16),e.qZA()()(),e.TgZ(31,"div",17)(32,"div",5)(33,"div",18)(34,"button",19),e.NdJ("click",function(){return o.clearFilters()}),e.TgZ(35,"span"),e._uU(36),e.ALo(37,"abpLocalization"),e.qZA()()(),e.TgZ(38,"div",18)(39,"button",20),e.NdJ("click",function(){return o.getData()}),e.TgZ(40,"span"),e._uU(41),e.ALo(42,"abpLocalization"),e.qZA()()()()()()()()(),e.TgZ(43,"div",21),e._UZ(44,"abp-extensible-table",22),e.qZA()()(),e.TgZ(45,"abp-modal",23),e.NdJ("visibleChange",function(r){return o.isModalVisible=r}),e.YNc(46,En,3,3,"ng-template",null,24,e.W1O),e.YNc(48,On,1,1,"ng-template",null,25,e.W1O),e.YNc(50,Pn,6,6,"ng-template",null,26,e.W1O),e.qZA(),e.YNc(52,Rn,2,1,"ng-container",27),e.YNc(53,Hn,7,1,"ng-template",null,28,e.W1O),e.YNc(55,ei,1,11,"ng-template",null,29,e.W1O),e.YNc(57,ti,1,2,"abp-feature-management",30),e._UZ(58,"abp-impersonate-tenant-modal")),2&i&&(e.Q6J("title",e.lcZ(1,23,"Saas::Tenants"))("toolbar",o.data.items),e.xp6(3),e.Q6J("list",o.list),e.xp6(2),e.Q6J("formGroup",o.formFilters),e.xp6(6),e.hij(" ",e.lcZ(12,25,"Saas::Edition")," "),e.xp6(2),e.Q6J("emptyOption",o.emptyOption)("getFn",o.editionService.getList),e.xp6(3),e.Q6J("ngbTooltip",e.lcZ(17,27,"Saas::EditionEndDateToolTip")),e.xp6(2),e.hij(" ",e.lcZ(19,29,"Saas::DisplayName:ExpirationDate")," "),e.xp6(7),e.Oqu(e.lcZ(26,31,"Saas::DisplayName:ActivationState")),e.xp6(3),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",o.activationStateOptions),e.xp6(6),e.Oqu(e.lcZ(37,33,"AbpUi::Clear")),e.xp6(3),e.Q6J("disabled",o.formFilters.invalid),e.xp6(2),e.Oqu(e.lcZ(42,35,"AbpUi::Refresh")),e.xp6(3),e.Q6J("data",o.data.items)("recordsTotal",o.data.totalCount)("list",o.list),e.xp6(1),e.Q6J("visible",o.isModalVisible)("busy",o.modalBusy)("options",e.DdM(37,ni)),e.xp6(7),e.Q6J("ngIf",o.setTenantReplaceableTemplateOptions),e.xp6(5),e.Q6J("abpReplaceableTemplate",e.WLB(49,ke,e.kEZ(43,De,e.DdM(38,ii),e.VKq(39,K,o.providerKey),e.VKq(41,Me,o.visibleFeatures)),e.VKq(47,Ie,o.onVisibleFeaturesChange))))},dependencies:[f.hL,f.J5,g.sg,g.O5,g.tP,g.RF,g.n9,l._Y,l.YN,l.Kr,l.EJ,l.JJ,l.JL,l.sg,l.u,c.YzZ,c.zLP,_t,bt,p.gt,p.m5,j,Q,m.r0,m.zS,m.YM,w.$,F.II,u.uN,u.Pz,u.nv,u.Is,u.Vx,u.tO,u.Dy,u._L,U,X,te,c.fuE],encapsulation:2})}return n})(),we=(()=>{class n{constructor(t,i){this.permissionService=t,this.service=i,this.data={},this.initialized=new J.X(this),this.width=273,this.height=136,this.chartData={},this.draw=()=>{this.permissionService.getGrantedPolicy("Saas.Editions")&&this.service.getUsageStatistics().subscribe(o=>{this.data=o.data,this.setChartData()})}}setChartData(){if(!this.data||"{}"===JSON.stringify(this.data))return void(this.chartData={});const t=Object.keys(this.data);setTimeout(()=>{this.chartData={labels:t,datasets:[{data:t.map(i=>this.data[i]),backgroundColor:Yt(Object.keys(this.data).length)}]},this.chart.refresh()},0)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(c.$AH),e.Y36(I))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-editions-usage-widget"]],viewQuery:function(i,o){if(1&i&&e.Gf(Ae,5),2&i){let s;e.iGM(s=e.CRH())&&(o.chart=s.first)}},inputs:{width:"width",height:"height"},outputs:{initialized:"initialized"},features:[e._Bn([c.FFO])],decls:1,vars:1,consts:[["class","abp-widget-wrapper",4,"abpPermission"],[1,"abp-widget-wrapper"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"row"],["type","pie",1,"w-100",3,"data","width","height"],["chart",""]],template:function(i,o){1&i&&e.YNc(0,oi,10,6,"div",0),2&i&&e.Q6J("abpPermission","Saas.Editions")},dependencies:[c.l97,Ae,c.fuE],encapsulation:2})}return n})(),Pe=(()=>{class n{constructor(t,i){this.service=t,this.permissionService=i,this.minHeight=136,this.trackByFn=(o,s)=>s.id,this.draw=()=>{this.permissionService.getGrantedPolicy("Saas.Tenants")&&this.service.getList({getEditionNames:!0,maxResultCount:6,skipCount:0,sorting:"CreationTime desc"}).subscribe(o=>this.data=o.items)}}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(E),e.Y36(c.$AH))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["abp-latest-tenants-widget"]],inputs:{minHeight:"minHeight"},decls:1,vars:1,consts:[["class","abp-widget-wrapper","data-widget-name","SaasLatestTenantsWidget","data-refresh-url","SaasWidgets/LatestTenants",4,"abpPermission"],["data-widget-name","SaasLatestTenantsWidget","data-refresh-url","SaasWidgets/LatestTenants",1,"abp-widget-wrapper"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"table","table-hover","table-sm"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(i,o){1&i&&e.YNc(0,si,21,13,"div",0),2&i&&e.Q6J("abpPermission","Saas.Tenants")},dependencies:[g.sg,c.l97,c.fuE],encapsulation:2})}return n})();const Ze=p.uk.createMany([{text:"Saas::Edit",action:n=>{n.getInjected(y).onEditEdition(n.record.id)},permission:"Saas.Editions.Update"},{text:"Saas::Features",action:n=>{n.getInjected(y).openFeaturesModal(n.record.id)},permission:"Saas.Editions.ManageFeatures"},{text:"Saas::ChangeHistory",action:n=>{n.getInjected(L)(n.record.id,"Volo.Saas.Editions.Edition")},permission:"AuditLogging.ViewChangeHistory:Volo.Saas.Edition",visible:n=>!!n.getInjected(L,null)},{text:"Saas::Delete",action:n=>{n.getInjected(y).delete(n.record)},permission:"Saas.Editions.Delete"},{text:"Saas::MoveAllTenants",action:n=>{n.getInjected(y).moveAllTenants(n.record)},permission:"Saas.Tenants.Update"}]),Re=p.QC.createMany([{type:"string",name:"displayName",displayName:"Saas::EditionName",sortable:!0},{type:"number",name:"tenantCount",displayName:"Saas::TenantCount"}]),ne=p.Od.createMany([{type:"string",name:"displayName",displayName:"Saas::EditionName",validators:()=>[l.Validators.required,l.Validators.maxLength(256)]},{type:"enum",name:"planId",displayName:"Saas::PlanId",visible:n=>!!n.getInjected(y).plans$.value.length,options:n=>n.getInjected(y).plans$.pipe((0,Y.U)(t=>[{key:"-",value:null}].concat(t.map(i=>({key:i.name,value:i.id})))))}]),Ue=p.JE.createMany([{text:"Saas::NewEdition",action:n=>{n.getInjected(y).onAddEdition()},permission:"Saas.Editions.Create",icon:"fa fa-plus"}]),Ve=p.uk.createMany([{text:"Saas::Edit",action:n=>{n.getInjected(v).onEditTenant(n.record.id)},permission:"Saas.Tenants.Update"},{text:"Saas::ConnectionStrings",action:n=>{n.getInjected(v).onEditConnectionString(n.record)},permission:"Saas.Tenants.ManageConnectionStrings"},{text:"Saas::ApplyDatabaseMigrations",action:n=>{n.getInjected(v).applyDatabaseMigrations(n.record.id)},permission:"Saas.Tenants.ManageConnectionStrings",visible:n=>n.record.hasDefaultConnectionString},{text:"Saas::Features",action:n=>{n.getInjected(v).openFeaturesModal(n.record.id)},permission:"Saas.Tenants.ManageFeatures"},{text:"Saas::ChangeHistory",action:n=>{n.getInjected(L)(n.record.id,"Volo.Saas.Tenants.Tenant")},permission:"AuditLogging.ViewChangeHistory:Volo.Saas.Tenant",visible:n=>!!n.getInjected(L,null)},{text:"Saas::LoginWithThisTenant",action:n=>{n.getInjected(ee).show(n.record.id)},permission:"Saas.Tenants.Impersonation",visible:n=>{const t=n.getInjected(c.XJE).getDeep("currentUser.impersonatorUserId");return(n.record.activationState==_.Active||n.record.activationState==_.ActiveWithLimitedTime&&new Date(n.record.activationEndDate)>new Date)&&null===t}},{text:"Saas::ChangePassword",action:n=>{n.getInjected(v).openSetTenantPasswordModal(n.record.id,n.record.name)},permission:"Saas.Tenants.SetPassword"},{text:"Saas::Delete",action:n=>{n.getInjected(v).delete(n.record.id,n.record.name)},permission:"Saas.Tenants.Delete"}]),qe=p.QC.createMany([{type:"string",name:"name",displayName:"Saas::TenantName",sortable:!0,columnWidth:300},{type:"string",name:"editionName",displayName:"Saas::EditionName",columnWidth:300},{type:"datetime",name:"editionEndDateUtc",displayName:"Saas::EditionEndDateUtc",columnWidth:300,tooltip:"Saas::EditionEndDateToolTip"},{type:"string",name:"activationState",displayName:"Saas::ActivationState",columnWidth:300,valueResolver:n=>{const a=n.getInjected(c.oQ8),t=n.getInjected(c.XJE),i=n.getInjected(e.soG),{shortDatePattern:o,shortTimePattern:s}=t.getDeep("localization.currentCulture.dateTimeFormat");let r="";switch(n.record.activationState){case _.Active:return r=a.instant("Saas::Enum:TenantActivationState.Active"),(0,k.of)(r);case _.ActiveWithLimitedTime:return r=`${a.instant("Saas::Enum:TenantActivationState.ActiveWithLimitedTime")} (${(0,g.p6)(n.record.activationEndDate,`${o} ${s.replace("tt","a")}`,i)})`,(0,k.of)(r);case _.Passive:return r=a.instant("Saas::Enum:TenantActivationState.Passive"),(0,k.of)(r)}}}]),V=p.Od.createMany([{type:"string",name:"name",id:"name",displayName:"Saas::TenantName",validators:()=>[l.Validators.required,l.Validators.maxLength(256)]},{type:"string",name:"editionId",displayName:"Saas::Edition",id:"edition",disabled:n=>{const a=n.record.editionEndDateUtc;return a&&new Date(a).getTime()<(new Date).getTime()},options:n=>{const a=n.getInjected(v).editions,i={value:null,key:n.getInjected(c.oQ8).instant("AbpUi::NotAssigned")};return(0,k.of)([i,...a.map(o=>({key:o.displayName,value:o.id}))])}},{type:"email",name:"adminEmailAddress",displayName:"Saas::DisplayName:AdminEmailAddress",id:"admin-email-address",validators:()=>[l.Validators.required,l.Validators.maxLength(256),l.Validators.email],formText:"Saas::DisplayName:AdminEmailAddressFormText"},{type:"passwordinputgroup",name:"adminPassword",displayName:"Saas::DisplayName:AdminPassword",id:"admin-password",autocomplete:"new-password",validators:n=>[l.Validators.required,...(0,m.dD)({get:n.getInjected})]},{type:"string",name:"activationState",displayName:"Saas::DisplayName:ActivationState",id:"activation-state",validators:()=>[l.Validators.required],defaultValue:_.Active,options:n=>{const a=n.getInjected(c.oQ8);return(0,k.of)([{key:a.instant("Saas::Enum:TenantActivationState.Active"),value:_.Active},{key:a.instant("Saas::Enum:TenantActivationState.ActiveWithLimitedTime"),value:_.ActiveWithLimitedTime},{key:a.instant("Saas::Enum:TenantActivationState.Passive"),value:_.Passive}])}},{type:"datetime",name:"activationEndDate",displayName:"Saas::DisplayName:ActivationEndDate",id:"activation-end-date",visible:n=>{const{tenantForm:a}=n.getInjected(v);return a.get("activationState").value===_.ActiveWithLimitedTime}}]),Je=[...V.slice(0,2),...V.slice(-2)],Ye=p.JE.createMany([{text:"Saas::NewTenant",action:n=>{n.getInjected(v).onAddTenant()},permission:"Saas.Tenants.Create",icon:"fa fa-plus"}]),ze={"Saas.EditionsComponent":Ze,"Saas.TenantsComponent":Ve},Qe={"Saas.EditionsComponent":Ue,"Saas.TenantsComponent":Ye},je={"Saas.EditionsComponent":Re,"Saas.TenantsComponent":qe},Be={"Saas.EditionsComponent":ne,"Saas.TenantsComponent":V},$e={"Saas.EditionsComponent":ne,"Saas.TenantsComponent":Je},ie=new e.OlP("SAAS_ENTITY_ACTION_CONTRIBUTORS"),oe=new e.OlP("SAAS_TOOLBAR_ACTION_CONTRIBUTORS"),ae=new e.OlP("SAAS_ENTITY_PROP_CONTRIBUTORS"),se=new e.OlP("SAAS_CREATE_FORM_PROP_CONTRIBUTORS"),re=new e.OlP("SAAS_EDIT_FORM_PROP_CONTRIBUTORS");let le=(()=>{class n{constructor(t){this.injector=t}canActivate(){const t=this.injector.get(p.X6),i=this.injector.get(ie,null)||{},o=this.injector.get(oe,null)||{},s=this.injector.get(ae,null)||{},r=this.injector.get(se,null)||{},h=this.injector.get(re,null)||{},x=this.injector.get(c.XJE);return(0,p.ot)(x,"Saas").pipe((0,Y.U)(A=>({"Saas.EditionsComponent":A.Edition,"Saas.TenantsComponent":A.Tenant})),(0,p.V_)(x,"Saas"),(0,N.b)(A=>{(0,p.Fr)(t.entityActions,ze,i),(0,p.Fr)(t.toolbarActions,Qe,o),(0,p.Hp)(t.entityProps,je,A.prop,s),(0,p.Hp)(t.createFormProps,Be,A.createForm,r),(0,p.Hp)(t.editFormProps,$e,A.editForm,h)}),(0,et.h)(!0))}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(e.zs3))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac})}return n})();const ri=[{path:"",redirectTo:"tenants",pathMatch:"full"},{path:"",component:c.O39,canActivate:[c.a1M,c.nG9,le],children:[{path:"tenants",component:c.c$y,data:{requiredPolicy:"Saas.Tenants",replaceableComponent:{key:"Saas.TenantsComponent",defaultComponent:v}}},{path:"editions",component:c.c$y,data:{requiredPolicy:"Saas.Editions",replaceableComponent:{key:"Saas.EditionsComponent",defaultComponent:y}}}]}];let li=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[Ne.Bz.forChild(ri),Ne.Bz]})}return n})(),ci=(()=>{class n{static forChild(t={}){return{ngModule:n,providers:[{provide:ie,useValue:t.entityActionContributors},{provide:oe,useValue:t.toolbarActionContributors},{provide:ae,useValue:t.entityPropContributors},{provide:se,useValue:t.createFormPropContributors},{provide:re,useValue:t.editFormPropContributors},le]}}static forLazy(t={}){return new c.Cgl(n.forChild(t))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[li,f.h2,c.IR2,vt,m.e2,u.XC,w.XE,F.BG,Jt,u.Oz,u.dT,O,u.M,u.HK,y]})}return n})();const pi=/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])*$/}}]);